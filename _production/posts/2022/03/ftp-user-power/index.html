<!DOCTYPE html><html lang="zh" data-theme="light" data-origin="http://huashunglass.com"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0" name="viewport"><meta charset="utf-8"><link rel="icon" type="image/png" href="http://huashunglass.com/assets/img/icons/favicon.png" sizes="128x128"><link rel="preload" href="//at.alicdn.com/t/c/font_2922698_9pj5wqw6kw5.woff2" as="font" type="font/woff2" crossorigin="anonymous"><link rel="stylesheet" href="//at.alicdn.com/t/c/font_2922698_9pj5wqw6kw5.css"><link rel="stylesheet" href="http://huashunglass.com/assets/css/style-182302c5d1.css" media="all"><link rel="stylesheet" href="http://huashunglass.com/assets/css/single-post-11924b14fd.css" media="all"><title>linux 指定 ftp 用户 特定目录及权限</title><meta name="description" content=""><meta property="og:locale" content="zh"><meta property="og:type" content="website"><meta property="og:title" content="linux 指定 ftp 用户 特定目录及权限"><meta property="og:site_name" content="Iris 博客 | 中文"><meta property="og:description" content=""><meta property="og:url" content="http://huashunglass.com/posts/2022/03/ftp-user-power/"><meta property="og:image" content="http://huashunglass.com/assets/img/icons/favicon.png"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@IrisZhu"><meta name="twitter:title" content="linux 指定 ftp 用户 特定目录及权限"><meta name="twitter:description" content=""><meta name="twitter:image" content="http://huashunglass.com/assets/img/icons/favicon.png"><script>var _hmt = _hmt || [];
      (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?d013155126dadf8457e34005b9c2d3a3";
        var s = document.getElementsByTagName("script")[0]; 
        s.parentNode.insertBefore(hm, s);
      })();</script></head><body class="zh"></body></html><header><nav><div class="toggle-menu"><span class="menu-line"></span> <span class="menu-line"></span> <span class="menu-line"></span></div><a class="logo" href="http://huashunglass.com/"><img src="http://huashunglass.com/assets/img/icons/favicon.png" alt="Logo"> </a><a class="search" href="http://huashunglass.com/search/"><i class="iconfont icon-search" aria-hidden="true"></i></a><div id="language-switcher"><div class="current-language"><i class="iconfont icon-zh active" aria-hidden="true"></i></div></div><div class="menus-container"><div class="wrapper"><div class="global-close-icon"><div></div><div></div></div><ul><li><a href="/" class="menu-title font-size-xxl"><div class="lable">首页</div></a></li><li><a href="/archives/1/" class="menu-title font-size-xxl"><div class="lable">归档</div></a></li><li><a href="/tags/" class="menu-title font-size-xxl"><div class="lable">分类</div></a></li><li><a href="/links/" class="menu-title font-size-xxl"><div class="lable">技术网址</div></a></li><li><a href="/about/" class="menu-title font-size-xxl"><div class="lable">关于</div></a></li></ul></div></div></nav></header><main id="single-post"><section id="hero"><div class="divimg linux"><h1></h1></div><div class="content"><h1>linux 指定 ftp 用户 特定目录及权限</h1></div></section><div class="wrapper"><div class="post-info"><a href="/archives/1/" class="btn btn-text">查看所有文章</a><div class="date font-size-xs">2022-03-03</div><ul class="tag-list"><li><a href="/tags/linux/" class="btn-tag">linux</a></li></ul></div><div class="content"><p>在linux中添加 ftp 用户, 并设置相应的权限, 操作步骤如下:</p><p>要求: 被限制用户名为 test.被限制路径为 /var/www/test</p><h2>新建建用户: 在root用户下:</h2><pre><code class="language-shell">useradd -d /var/www/test test # 增加用户 test, 并制定test用户的主目录为 /var/www/test
passwd test # 为 test 设置密码
</code></pre><h2>更改用户相应的权限设置</h2><pre><code class="language-shell">usermod -s /sbin/nologin test # 限定用户 test 不能 telnet, 只能 ftp
usermod -s /sbin/bash test # 用户 test 恢复正常
usermod -d /var/www test # 更改用户 test 的主目录为 /var/www
</code></pre><h2>如果需要允许用户修改密码, 但是又没有 telnet 登录系统的权限:</h2><pre><code class="language-shell">usermod -s /usr/bin/passwd test # 用户telnet后将直接进入改密界面
</code></pre><h2>建工作组</h2><pre><code class="language-shell">groupadd test # 新建test工作组
</code></pre><h2>新建用户同时增加工作组</h2><pre><code class="language-shell">useradd -g test phpq # 新建phpq用户并增加到test工作组
</code></pre><p>注: -g 所属组 -d 家目录 -s 所用的SHELL</p><h2>给已有的用户增加工作组</h2><pre><code class="language-shell">usermod -G groupname username # (这个会把用户从其他组中去掉)
usermod -a groupname username # 或者: gpasswd -a user group
</code></pre><p>如果添加了用户, 添加了组, 然后使这个组里的人都可以sudo 到公共账号下</p><p>可以/etc/sudoers.d 下面建立一个文件内容如下 , 就可以是etl组的所有用户都可以无密码的切到etl用户下.</p><pre><code class="language-shell">%etl ALL=(ALL) NOPASSWD: /bin/su etl
%etl ALL=(ALL) NOPASSWD: /bin/su – etl
</code></pre><h2>临时关闭:</h2><p>在 /etc/shadow 文件中属于该用户的行的第二个字段(密码)前面加上<em>就可以了.想恢复该用户, 去掉</em>即可. 或者使用如下命令关闭用户账号: passwd peter –l</p><p>重新释放: passwd peter –u</p><h2>永久性删除用户账号</h2><pre><code class="language-shell">userdel peter
groupdel peter
usermod –G peter peter # (强制删除该用户的主目录和主目录下的所有文件和子目录)
</code></pre><h2>从组中删除用户</h2><p>编辑 /etc/group 找到 GROUP1 那一行, 删除 A</p><p>或者用命令 gpasswd -d A GROUP</p><h2>显示用户信息</h2><pre><code class="language-shell">id user
cat /etc/passwd
</code></pre></div><div class="switch-posts"><div class="item"><div class="lable">上一篇:</div><a href="/posts/2022/02/linux-zip-unzip/" class="text-link">linux 中 zip 和 unzip 详解</a></div><div class="item"><div class="lable">下一篇:</div><a href="/posts/2022/04/images-lazy-loading/" class="text-link">图片懒加载处理</a></div></div></div></main><footer><div class="theme-switch"><i class="iconfont icon-theme" aria-hidden="true"></i> <input id="toggle-theme" class="toggle-theme" type="checkbox"> <label for="toggle-theme"></label></div><a href="http://blog.huashunglass.com/" target="_blank" class="old-link">旧版博客</a><div class="copyright"><p>2016 - © 2023 Iris 博客 | 来自地球的设计</p></div></footer><script src="http://huashunglass.com/assets/js/wow-d48b3cbdac.min.js"></script><script src="http://huashunglass.com/assets/js/jquery-3.4-7111461029.1.min.js"></script><script src="http://huashunglass.com/assets/js/master-347d4fa7d9.js"></script>